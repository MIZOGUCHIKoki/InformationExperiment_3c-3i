\section{\method}
\newcommand{\elt}{\texttt{Eye Link Ⅱ}}
\newcommand{\csv}{\texttt{CSV}}
\paragraph{実験装置}
眼球運動の計測には，\elt（SR Research社）を用いる．刺激呈示用装置として，汎用コンピュータと液晶ディスプレイを利用する．
データ分析するソフトウェアには\matlab を用いる．
\begin{table}[H]
    \caption{実験装置\ （\kadaia）}
    \label{tbl:実験装置\kadaia}
    \begin{tabularx}{\textwidth}{cAR}
        \hline
        {\bfseries 眼球運動計測器}                    & \elt                     & SR Research社                                     \\
        \hline
        \multirow{3}{*}{\bfseries 刺激呈示コンピュータ}  & プロセッサ                    & Intel(R) Core(TM) i7-2600 CPU @ 3.40GHz 3.40 GHz \\
                                               & メモリ                      & 4GB                                              \\
                                               & OS                       & Microsoft Windows 7 Professional Service Pack 1  \\
        \hline
        \multirow{6}{*}{\bfseries データ分析コンピュータ} & コンピュータ                   & MacBook Air 2022 （Apple社）\texttt{MLY13J/A}       \\
                                               & プロセッサ                    & Apple Silicon M2\ \  8コアCPU，8コアGPU               \\
                                               & メモリ                      & 8GB                                              \\
                                               & OS                       & macOS 13.4                                       \\
                                               & \multirow{2}{*}{\matlab} & R2023a - academic use (Update1 9.14.02239454)    \\
                                               &                          & 64-bit (maci64) March 30, 2023                   \\
        \hline
    \end{tabularx}
\end{table}
\newpage
\paragraph{眼球運動の計測}
顔の印象に関して判断するときの，眼球運動を計測する
\elt のアイカメラを装着し，キャリブレーション\footnote{被験者の中心点を，実験機に記憶させる手続き．}およびバリデーション\footnote{キャリブレーションが正常に完了したことを確認する手続き}を行う．次に固定視点を注視し，左右に現れる顔画像のどちらが魅力的かを判断し，キーを押して反応する．この試行20回行う．
\paragraph{実験データの分析}
\newcommand{\expos}{\texttt{expos}}
実験データを\csv ファイルで出力したものに対して分析する．出力された\csv ファイルと，データ処理の過程で作成する\expos 行列ののIndexを以下に示す．
\begin{center}
    \begin{framed}
        \begin{minipage}[t][]{.23\textwidth}
            \begin{center}
                \texttt{exp4i\_g0310.csv}
            \end{center}
            \begin{enumerate}
                \renewcommand{\labelenumi}{\theenumi 列目}
                \item 試行回数
                \item 選択画像
                      \begin{itemize}
                          \setlength{\leftskip}{-2em}
                          \item \texttt{100}：左を選択
                          \item \texttt{102}：右を選択
                      \end{itemize}
            \end{enumerate}
        \end{minipage}
        \begin{minipage}[t]{.48\textwidth}
            \begin{center}
                \texttt{g0310.asc\_TRIAL\_N.csv}\ \ \((\texttt{N}={1,2,\dots 20})\)
            \end{center}
            \begin{enumerate}
                \renewcommand{\labelenumi}{\theenumi 列目}
                \item 時間（ms）
                \item 測定する目の情報（未使用）
                \item 画面の状態
                      \begin{itemize}
                          \setlength{\leftskip}{-2em}
                          \item \texttt{0}：画面表示なし
                          \item \texttt{1}：注視点
                          \item \texttt{2}：画像呈示
                      \end{itemize}
                \item 左右注視位置\(x\)座標
                \item 左注視位置\(y\)座標（未使用）
                \item 左目瞳孔径（未使用）
            \end{enumerate}
        \end{minipage}
        \begin{minipage}[t]{.26\textwidth}
            \begin{center}
                \expos
            \end{center}
            \begin{enumerate}
                \renewcommand{\labelenumi}{\theenumi 列目}
                \item 時間
                \item 画面の状態
                \item {\footnotesize 左右どちらを見ているか}
                \item {\footnotesize 選択した方を見ているか}
                \item \(x\)座標
            \end{enumerate}
        \end{minipage}
    \end{framed}
\end{center}
\paragraph{欠損値}
今回の実験機\elt は，時間周波数\(500\textrm{Hz}\)でデータを取得している．
この場合，隣接するサンプル間の時間感覚は\(2\textrm{ms}\)となる．
眼球の向きが計測できない場合（まばたきなど），その部分のデータは記録されため欠損値として扱う．
\paragraph{データ処理の手順}
今回の実験では，呈示された顔画像に対して魅力的であると判断した時刻から1秒さかのぼった時刻を\(-1000\textrm{ms}\)とし，
選択した顔画像を見ている場合を\texttt{1}，そうでない場合を\texttt{0}として，その合計を欠損値を除いた試行回数で割り，
\(0\textrm{ms}\)から\(500\textrm{ms}\)の各時刻に対して，魅力的であると判断した画像を注視した割合を算出する．
\begin{enumerate}
    \item \texttt{exp4i\_g0310.csv}を\texttt{readmatrix}関数を用いて読み込む．
    \item 試行回数分のループ中に次の処理を行う．ループ変数を\texttt{k}とする．
          \begin{enumerate}
              \renewcommand{\theenumii}{\roman{enumii}}
              \renewcommand{\labelenumii}{\textbf{\theenumii}. }
              \newcommand{\dt}{\texttt{data}}
              \newcommand{\ms}{\texttt{ms}}
              \newcommand{\bn}{\texttt{bin}}
              \item 各試行結果を\texttt{readmatrix}関数を用いて読み込む（\dt ）．
              \item \dt の行サイズ（\texttt{sizeR}），列サイズ（\texttt{sizeC}）に対して，欠損値がない場合の理想行サイズ（\ms）を求める．
              \item \expos を\mat{\ms}{5}で初期化する．初期値を\texttt{0}にするため，\texttt{zeros}関数を用いる．
              \item \dt と\expos に対して判断した瞬間を時刻\(0\)とするため，\dt と\expos それぞれに対して，\mat{\textrm{全}}{1}と\mat{1}{1}の差をとる．
              \item デフォルトで欠損値とするため，\expos の2行目から5行目へ\(-1\)を代入する．
              \item \expos と\dt の1列目に対して欠損値を検出するため，\texttt{ismember}関数を用いる．この関数は，第1引数にある行が第2引数にあれば\texttt{1}，そうでなければ\texttt{0}を返す．この真理行列を\bn とする．
              \item \expos の2列目に\dt の3列目，\expos の5列目に\dt の4列目を代入する．このとき，\bn が\texttt{1}の行のみ\expos へ代入する．
              \item 注視展を見ているとき，左目\(x\)座標の平均値（\texttt{x\_ave}）に対して，左目\(x\)座標が\texttt{x\_ave}以下の場合は「左を見ている」，\texttt{x\_ave}より大きい場合は「右を見ている」とし，\expos 3列目に\texttt{100}または\texttt{102}を代入する．欠損値に対しては処理を行わない．
              \item 最終的に魅力的であると判断した顔画像を注視している場合は\texttt{1}，そうでない場合は\texttt{0}を\expos の4列目に代入する．この処理は，画面状態が\texttt{0}と欠損値に対しては行わない．
              \item \mat{500}{20}で初期化済みの\texttt{mergeC}行列に対して，\mat{\textrm{全}}{\texttt{k}}に\expos の1から500行目（判断前1秒間）のデータを格納する．
          \end{enumerate}
    \item
\end{enumerate}